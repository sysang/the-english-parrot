---

version: "2.0"

stories:
  - story: Scenario MAIN
    steps:
      - intent: client_initializes_a_kiss_story
      - action: action_initialize_a_kiss_story
      - slot_was_set:
          - "lesson_topic": "a_kiss_story"
          - "story_progress": 0
          - "will_return": null
      - action: utter_start_a_kiss_lesson
      - action: utter_a_kiss_01_DidCarlosBuyOldCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 1
          - "will_return": null
          - "stm_bot_reference_of_truth": "he bought a new car"
      - checkpoint: check_a_kiss_01_DidCarlosBuyOldCar
      - intent: nonexclamation__positive__materialpr
        entities:
          - "actor": "he"
          - "materialpr": "bought"
          - "goal": "a new car"
      - action: utter_a_kiss_02_DidCarlosBuyExpensiveBicycle
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 2
          - "will_return": null
          - "stm_bot_reference_of_truth": "it was a car"
      - checkpoint: check_a_kiss_02_DidCarlosBuyExpensiveBicycle
      - intent: nonexclamation__positive__identifyingpr
        entities:
          - "identified": "it"
          - "identifier": "a car"
      - action: utter_a_kiss_03_HowBigWasCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 3
          - "will_return": null
          - "stm_bot_reference_of_truth": "it was blue"
      - checkpoint: check_a_kiss_03_HowBigWasCar
      - intent: nonexclamation__positive__attributivepr
        entities:
          - "carrier": "it"
          - "attribute": "huge"
      - action: utter_a_kiss_04_WhatColorWasCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 4
          - "will_return": null
          - "stm_bot_reference_of_truth": "it was blue"
      - checkpoint: check_a_kiss_04_WhatColorWasCar
      - intent: nonexclamation__positive__attributivepr
        entities:
          - "carrier": "it"
          - "attribute": "blue"
      - action: utter_a_kiss_05_WhileDrivingDownWhatDidHeSee
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 5
          - "will_return": null
          - "stm_bot_reference_of_truth": "he saw a girl"
      - checkpoint: check_a_kiss_05_WhileDrivingDownWhatDidHeSee
      - intent: nonexclamation__positive__mentalpr
        entities:
          - "senser": "he"
          - "mentalpr": "saw"
          - "phenomenon": "a girl"
      - action: utter_a_kiss_06_DidSheLookBeautiful
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 6
          - "will_return": null
          - "stm_bot_reference_of_truth": "she was beautiful"
      - checkpoint: check_a_kiss_06_DidSheLookBeautiful
      - intent: nonexclamation__positive__attributivepr
        entities:
          - "carrier": "she"
          - "attribute": "beautiful"
      - action: utter_lesson_completed
      - action: action_restart

  - story: Scenario of NEGATIVE_FORM
    steps:
      - checkpoint: check_a_kiss_01_DidCarlosBuyOldCar
      - intent: nonexclamation__negative__materialpr
        entities:
          - "actor": "he"
          - "materialpr": "buy"
          - "goal": "an old car"
      - action: utter_a_kiss_02_DidCarlosBuyExpensiveBicycle
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 2
          - "will_return": null
      - intent: nonexclamation__negative__identifyingpr
        entities:
          - "identified": "it"
          - "identifier": "a bicycle"
      - action: utter_a_kiss_03_HowBigWasCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 3
          - "will_return": null
      - intent: negative__shortanswer
      - action: utter_a_kiss_02_DidCarlosBuyExpensiveBicycle
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 2
          - "will_return": null
      - intent: negative__shortanswer
      - action: utter_a_kiss_03_HowBigWasCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 3
          - "will_return": null
      - intent: affirmative__adjectivegroup
        entities:
          - "adjectivegrp": "huge"
      - action: utter_a_kiss_04_WhatColorWasCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 4
          - "will_return": null
      - intent: affirmative__adjectivegroup
        entities:
          - "adjectivegrp": "blue"
      - action: utter_a_kiss_05_WhileDrivingDownWhatDidHeSee
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 5
          - "will_return": null
      - intent: affirmative__nominalgroup
        entities:
          - "nominalgrp": "a girl"
      - action: utter_a_kiss_06_DidSheLookBeautiful
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 6
          - "will_return": null
      - intent: affirmative__shortanswer
      - action: utter_lesson_completed
      - action: action_restart

  - story: Scenario of utter RETURN_TO_PREVIOUS_QUESTION-01
    steps:
      - checkpoint: check_a_kiss_01_DidCarlosBuyOldCar
      - or:
          - intent: nonexclamation__positive__materialpr
          - intent: nonexclamation__negative__materialpr
          - intent: nonexclamation__negative__identifyingpr
          - intent: nonexclamation__positive__attributivepr
          - intent: nonexclamation__negative__attributivepr
          - intent: nonexclamation__positive__mentalpr
          - intent: nonexclamation__negative__mentalpr
          - intent: affirmative__nominalgroup
          - intent: affirmative__adjectivegroup
          - intent: affirmative__shortanswer
          - intent: negative__shortanswer
      - slot_was_set:
          - "story_progress": 1
          - "will_return": "positive"
      - action: utter_return_to_previous_question
      - action: utter_a_kiss_01_DidCarlosBuyOldCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 1
          - "will_return": null

  - story: Scenario of utter RETURN_TO_PREVIOUS_QUESTION-02
    steps:
      - checkpoint: check_a_kiss_02_DidCarlosBuyExpensiveBicycle
      - or:
          - intent: nonexclamation__positive__materialpr
          - intent: nonexclamation__negative__materialpr
          - intent: nonexclamation__negative__identifyingpr
          - intent: nonexclamation__positive__attributivepr
          - intent: nonexclamation__negative__attributivepr
          - intent: nonexclamation__positive__mentalpr
          - intent: nonexclamation__negative__mentalpr
          - intent: affirmative__nominalgroup
          - intent: affirmative__adjectivegroup
          - intent: affirmative__shortanswer
          - intent: negative__shortanswer
      - slot_was_set:
          - "story_progress": 2
          - "will_return": "positive"
      - action: utter_return_to_previous_question
      - action: utter_a_kiss_02_DidCarlosBuyExpensiveBicycle
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 2
          - "will_return": null

  - story: Scenario of utter RETURN_TO_PREVIOUS_QUESTION-03
    steps:
      - checkpoint: check_a_kiss_03_HowBigWasCar
      - or:
          - intent: nonexclamation__positive__materialpr
          - intent: nonexclamation__negative__materialpr
          - intent: nonexclamation__negative__identifyingpr
          - intent: nonexclamation__positive__attributivepr
          - intent: nonexclamation__negative__attributivepr
          - intent: nonexclamation__positive__mentalpr
          - intent: nonexclamation__negative__mentalpr
          - intent: affirmative__nominalgroup
          - intent: affirmative__adjectivegroup
          - intent: affirmative__shortanswer
          - intent: negative__shortanswer
      - slot_was_set:
          - "story_progress": 3
          - "will_return": "positive"
      - action: utter_return_to_previous_question
      - action: utter_a_kiss_03_HowBigWasCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 3
          - "will_return": null

  - story: Scenario of utter RETURN_TO_PREVIOUS_QUESTION-04
    steps:
      - checkpoint: check_a_kiss_04_WhatColorWasCar
      - or:
          - intent: nonexclamation__positive__materialpr
          - intent: nonexclamation__negative__materialpr
          - intent: nonexclamation__negative__identifyingpr
          - intent: nonexclamation__positive__attributivepr
          - intent: nonexclamation__negative__attributivepr
          - intent: nonexclamation__positive__mentalpr
          - intent: nonexclamation__negative__mentalpr
          - intent: affirmative__nominalgroup
          - intent: affirmative__adjectivegroup
          - intent: affirmative__shortanswer
          - intent: negative__shortanswer
      - slot_was_set:
          - "story_progress": 4
          - "will_return": "positive"
      - action: utter_return_to_previous_question
      - action: utter_a_kiss_04_WhatColorWasCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 4
          - "will_return": null

  - story: Scenario of utter RETURN_TO_PREVIOUS_QUESTION-05
    steps:
      - checkpoint: check_a_kiss_05_WhileDrivingDownWhatDidHeSee
      - or:
          - intent: nonexclamation__positive__materialpr
          - intent: nonexclamation__negative__materialpr
          - intent: nonexclamation__negative__identifyingpr
          - intent: nonexclamation__positive__attributivepr
          - intent: nonexclamation__negative__attributivepr
          - intent: nonexclamation__positive__mentalpr
          - intent: nonexclamation__negative__mentalpr
          - intent: affirmative__nominalgroup
          - intent: affirmative__adjectivegroup
          - intent: affirmative__shortanswer
          - intent: negative__shortanswer
      - slot_was_set:
          - "story_progress": 5
          - "will_return": "positive"
      - action: utter_return_to_previous_question
      - action: utter_a_kiss_05_WhileDrivingDownWhatDidHeSee
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 5
          - "will_return": null

  - story: Scenario of utter RETURN_TO_PREVIOUS_QUESTION-06
    steps:
      - checkpoint: check_a_kiss_06_DidSheLookBeautiful
      - or:
          - intent: nonexclamation__positive__materialpr
          - intent: nonexclamation__negative__materialpr
          - intent: nonexclamation__negative__identifyingpr
          - intent: nonexclamation__positive__attributivepr
          - intent: nonexclamation__negative__attributivepr
          - intent: nonexclamation__positive__mentalpr
          - intent: nonexclamation__negative__mentalpr
          - intent: affirmative__nominalgroup
          - intent: affirmative__adjectivegroup
          - intent: affirmative__shortanswer
          - intent: negative__shortanswer
      - slot_was_set:
          - "story_progress": 6
          - "will_return": "positive"
      - action: utter_return_to_previous_question
      - action: utter_a_kiss_06_DidSheLookBeautiful
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 6
          - "will_return": null

  - story: Scenario of UTTER_PLEASE_REPHRASE
    steps:
      - checkpoint: check_a_kiss_01_DidCarlosBuyOldCar
      - intent: nlu_fallback
      - action: utter_please_rephrase
      - intent: nonexclamation__positive__materialpr
        entities:
          - "actor": "he"
          - "materialpr": "bought"
          - "goal": "a new car"
      - action: utter_a_kiss_02_DidCarlosBuyExpensiveBicycle
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 2
          - "will_return": null
      - intent: nlu_fallback
      - action: utter_please_rephrase
      - intent: nonexclamation__positive__identifyingpr
        entities:
          - "identified": "it"
          - "identifier": "a car"
      - action: utter_a_kiss_03_HowBigWasCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 3
          - "will_return": null
      - intent: nlu_fallback
      - action: utter_please_rephrase
      - intent: nonexclamation__positive__attributivepr
        entities:
          - "carrier": "it"
          - "attribute": "huge"
      - action: utter_a_kiss_04_WhatColorWasCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 4
          - "will_return": null
      - intent: nlu_fallback
      - action: utter_please_rephrase
      - intent: nonexclamation__positive__attributivepr
        entities:
          - "carrier": "it"
          - "attribute": "blue"
      - action: utter_a_kiss_05_WhileDrivingDownWhatDidHeSee
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 5
          - "will_return": null
      - checkpoint: check_a_kiss_05_WhileDrivingDownWhatDidHeSee
      - intent: nlu_fallback
      - action: utter_please_rephrase
      - intent: nonexclamation__positive__mentalpr
        entities:
          - "senser": "he"
          - "mentalpr": "saw"
          - "phenomenon": "a girl"
      - action: utter_a_kiss_06_DidSheLookBeautiful
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 6
          - "will_return": null
      - checkpoint: check_a_kiss_06_DidSheLookBeautiful
      - intent: nlu_fallback
      - action: utter_please_rephrase
      - intent: nonexclamation__positive__attributivepr
        entities:
          - "carrier": "she"
          - "attribute": "beautiful"
      - action: utter_lesson_completed
      - action: action_restart

  - story: Scenario of WRONG_ANSWER
    steps:
      - checkpoint: check_a_kiss_01_DidCarlosBuyOldCar
      - intent: affirmative__shortanswer
      - action: utter_a_kiss_01_disagree
      - action: utter_a_kiss_02_DidCarlosBuyExpensiveBicycle
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 2
          - "will_return": null
      - intent: affirmative__shortanswer
      - action: utter_a_kiss_02_disagree
      - action: utter_a_kiss_03_HowBigWasCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 3
          - "will_return": null
      - or:
          - intent: nonexclamation__positive__attributivepr
            entities:
              - "carrier": "it"
              - "attribute": "small"
          - intent: nonexclamation__positive__attributivepr
            entities:
              - "carrier": "it"
              - "attribute": "modern"
      - action: utter_a_kiss_03_disagree
      - action: utter_a_kiss_04_WhatColorWasCar
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 4
          - "will_return": null
      - or:
          - intent: nonexclamation__positive__attributivepr
            entities:
              - "carrier": "it"
              - "attribute": "green"
          - intent: nonexclamation__positive__attributivepr
            entities:
              - "carrier": "it"
              - "attribute": "brown"
          - intent: nonexclamation__positive__attributivepr
            entities:
              - "carrier": "it"
              - "attribute": "bright"
      - action: utter_a_kiss_04_disagree
      - action: utter_a_kiss_05_WhileDrivingDownWhatDidHeSee
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 5
          - "will_return": null
      - or:
          - intent: nonexclamation__positive__mentalpr
            entities:
              - "senser": "he"
              - "mentalpr": "saw"
              - "phenomenon": "a boy"
          - intent: nonexclamation__positive__mentalpr
            entities:
              - "senser": "he"
              - "mentalpr": "saw"
              - "phenomenon": "an egg"
          - intent: affirmative__nominalgroup
            entities:
              - "nominalgrp": "men"
      - action: utter_a_kiss_05_disagree
      - action: utter_a_kiss_06_DidSheLookBeautiful
      - action: action_store_lesson_history__a_kiss
      - slot_was_set:
          - "story_progress": 6
          - "will_return": null
      - or:
          - intent: negative__shortanswer
          - intent: nonexclamation__positive__attributivepr
            entities:
              - "carrier": "she"
              - "attribute": "ugly"
      - action: utter_a_kiss_06_disagree
      - action: utter_lesson_completed
      - action: action_restart
